<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ–ª–æ –≤ –®–ª—è–ø–µ üéì | –®–∫–æ–ª–∞ –ò–ª–ª—é–∑–∏–π</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Permanent+Marker&family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style>
        :root {
            --primary-color: #333333;
            --secondary-color: #FFFFFF;
            --accent-color: #E67E22;
            --bg-light: #FFF0B5;
            --card-shadow: 0 5px 0px 5px rgba(51, 51, 51, 0.7);
            --text-stroke-color: #FFFFFF;
            --border-thick: 3px solid var(--primary-color);
            --gold-color: #FFD700;
        }

        @keyframes slideIn {
            0% { transform: translateX(100%); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); opacity: 0.8; }
            100% { transform: scale(1); }
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-light);
            color: var(--primary-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            border: 8px solid var(--primary-color);
        }

        /* --- –ê–£–î–ò–û --- */
        #audio-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            display: flex;
            gap: 10px;
        }
        .control-button {
            background-color: var(--secondary-color);
            border: var(--border-thick);
            border-radius: 50%;
            width: 45px;
            height: 45px;
            cursor: pointer;
            font-size: 1.4em;
            line-height: 43px;
            text-align: center;
            box-shadow: 2px 2px 0 var(--primary-color);
            transition: transform 0.1s;
        }
        .control-button:active {
            transform: translate(2px, 2px);
            box-shadow: none;
        }

        /* --- –®–ê–ü–ö–ê --- */
        header {
            background-color: var(--primary-color);
            color: var(--bg-light);
            padding: 15px 0;
            text-align: center;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
            font-family: 'Permanent Marker', cursive;
            border-bottom: 3px solid var(--accent-color);
        }
        header h1 {
            font-size: 2.8em;
            text-shadow: 3px 3px 0 var(--accent-color),
                         6px 6px 0 rgba(0, 0, 0, 0.15);
            line-height: 0.9;
            padding: 5px;
        }

        main {
            padding: 25px 0;
            flex-grow: 1;
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
        }

        /* --- –í–´–ë–û–† –ö–£–†–°–ê (–ö–ê–†–£–°–ï–õ–¨) --- */
        #course-selection {
            text-align: center;
            padding: 0 10px;
        }
        #course-selection h2 {
            font-family: 'Bebas Neue', sans-serif;
            color: var(--primary-color);
            font-size: 2.4em;
            margin-bottom: 20px;
            text-transform: uppercase;
            -webkit-text-stroke: 1px var(--text-stroke-color);
            text-stroke: 1px var(--text-stroke-color);
            border-bottom: 2px dashed var(--primary-color);
            padding-bottom: 8px;
            max-width: 760px;
            margin: 0 auto 20px auto;
        }

        .carousel-wrapper {
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            padding: 10px 0;
            margin-bottom: 10px;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .carousel-wrapper::-webkit-scrollbar { display: none; }

        .course-carousel {
            display: flex;
            gap: 20px;
            padding: 0 10px;
            width: max-content;
        }

        .course-card {
            background-color: var(--secondary-color);
            border-radius: 12px;
            padding: 15px;
            min-width: 200px;
            max-width: 220px;
            height: 300px;
            box-shadow: 5px 5px 0 var(--primary-color);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 3px solid var(--primary-color);
            scroll-snap-align: center;

            display: flex;
            flex-direction: column;
            justify-content: space-between;
            flex-shrink: 0;

            animation: slideIn 0.5s ease-out forwards;
        }
        .course-card:nth-child(2) { animation-delay: 0.1s; }
        .course-card:nth-child(3) { animation-delay: 0.2s; }
        .course-card:nth-child(4) { animation-delay: 0.3s; }
        .course-card:nth-child(5) { animation-delay: 0.4s; }
        .course-card:nth-child(6) { animation-delay: 0.5s; }
        .course-card:nth-child(7) { animation-delay: 0.6s; }
        .course-card:nth-child(8) { animation-delay: 0.7s; }
        .course-card:nth-child(9) { animation-delay: 0.8s; }

        .course-card:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 8px 8px 0 var(--accent-color);
        }

        .course-card[data-type="big"] {
            border-color: var(--gold-color);
            box-shadow: 5px 5px 0 var(--gold-color);
        }

        .course-card h3 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.4em;
            color: var(--primary-color);
            text-transform: uppercase;
            margin-bottom: 5px;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 4px;
        }

        .course-card p {
            color: #555;
            font-style: italic;
            font-size: 0.9em;
            margin-top: 8px;
        }

        .card-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 6px;
            border: 2px solid var(--primary-color);
            margin-bottom: 10px;
        }

        /* --- –°–ü–ò–°–û–ö –£–†–û–ö–û–í --- */
        #lesson-list-view {
            text-align: center;
            padding: 20px;
            background-color: var(--secondary-color);
            border: var(--border-thick);
            border-radius: 12px;
            box-shadow: 5px 5px 0 var(--primary-color);
            max-width: 600px;
            margin: 20px auto;
        }

        #lesson-list-title {
            font-family: 'Permanent Marker', cursive;
            color: var(--accent-color);
            font-size: 2em;
            margin-bottom: 10px;
        }

        #lesson-list {
            list-style: none;
            padding: 0;
            margin-top: 10px;
        }

        .lesson-item {
            background-color: #fff;
            border-radius: 10px;
            padding: 8px 12px;
            margin-bottom: 6px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.12);
            cursor: pointer;
            transition: all 0.2s ease;
            border-left: 6px solid var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .lesson-item:hover {
            transform: translateX(4px);
            background-color: #fdf5de;
        }

        .lesson-item.active {
            border-left-color: var(--accent-color);
            background-color: #ffe8c9;
            font-weight: 700;
        }

        .lesson-item-preview {
            width: 90px;
            height: 56px;
            border-radius: 6px;
            object-fit: cover;
            flex-shrink: 0;
            border: 1px solid #ddd;
            background: #f5f5f5;
        }

        .lesson-item span.title {
            flex-grow: 1;
            text-align: left;
            font-size: 0.92em;
        }

        /* --- –í–ò–î–ï–û-–ü–õ–ï–ï–† 16:9 --- */
        #video-player-view {
            text-align: center;
            padding: 20px;
            background-color: var(--secondary-color);
            border: var(--border-thick);
            border-radius: 12px;
            box-shadow: 5px 5px 0 var(--primary-color);
            max-width: 700px;
            margin: 20px auto;
        }

        #current-lesson-name-label {
            margin-top: 6px;
            font-weight: 700;
            font-size: 0.95em;
        }

        #current-lesson-name {
            color: var(--accent-color);
        }

        .video-player-container-kinescope {
            margin-top: 14px;
            margin-bottom: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            padding-top: 56.25%;
            width: 100%;
            background: #000;
        }

        @media (min-width: 768px) {
            .video-player-container-kinescope {
                max-width: 640px;
                margin-left: auto;
                margin-right: auto;
            }
        }

        .video-player-container-kinescope iframe {
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            border: none;
            z-index: 2;
        }

        .video-thumbnail-large {
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            background-color: #333;
            transition: opacity 0.3s;
            z-index: 1;
        }

        .placeholder-content {
            padding: 6px 0;
            color: var(--primary-color);
        }

        .placeholder-icon {
            font-size: 2.6em;
            color: var(--gold-color);
            margin-bottom: 4px;
            display: block;
            animation: pulse 2s infinite;
        }

        .back-button, #submit-reg-btn, .form-button {
            background-color: var(--primary-color);
            color: var(--bg-light);
            border: 3px solid var(--primary-color);
            padding: 8px 18px;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 14px;
            font-weight: 700;
            transition: all 0.1s;
            width: 100%;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.1em;
            box-shadow: 3px 3px 0 var(--accent-color);
            text-transform: uppercase;
        }
        .back-button:hover, #submit-reg-btn:hover, .form-button:hover {
            background-color: #555;
            box-shadow: 3px 3px 0 var(--bg-light);
        }
        .back-button:active, #submit-reg-btn:active, .form-button:active {
            transform: translate(3px, 3px);
            box-shadow: none;
        }

        .hidden { display: none !important; }

        /* --- –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø --- */
        .registration-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 200;
        }

        .registration-modal {
            background-color: #fff;
            padding: 24px;
            border-radius: 15px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-content-container p {
            margin-bottom: 10px;
            font-size: 0.9em;
            color: #444;
        }

        .policy-text-container {
            font-size: 0.8em;
            max-height: 300px;
            overflow-y: auto;
            padding: 8px;
            border: 1px solid #ddd;
            margin-bottom: 10px;
        }

        .form-group {
            margin-bottom: 10px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 4px;
            font-size: 0.85em;
            font-weight: 700;
        }

        .form-group input {
            width: 100%;
            padding: 6px 8px;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 0.9em;
        }

        .loading-spinner {
            font-size: 0.9em;
            text-align: center;
            padding: 10px 0;
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
        }

        @media (min-width: 769px) {
            #swipe-hint { font-size: 0.8em; opacity: 0.8; }
        }
    </style>
</head>
<body>

<div id="audio-controls">
    <audio id="bg-music" src="background_music.mp3" loop preload="auto"></audio>
    <button id="music-toggle" class="control-button" title="–§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞">‚ñ∂Ô∏è</button>
    <audio id="click-sound" src="click_sound.mp3" preload="auto"></audio>
</div>

<header>
    <h1>–î–µ–ª–æ –≤ –®–ª—è–ø–µ üéì</h1>
</header>

<main>
    <section id="course-selection">
        <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–π –æ–±—É—á–∞—é—â–∏–π –Ω–∞–±–æ—Ä —Ç–µ—Ö–Ω–∏–∫</h2>
        <div class="carousel-wrapper" id="course-carousel-wrapper">
            <div class="course-carousel">
                <div class="course-card" data-id="set_75" data-type="big">
                    <img src="images/set1.png" alt="75 –ª—É—á—à–∏—Ö —Ñ–æ–∫—É—Å–æ–≤" class="card-image">
                    <h3>75 –õ–£–ß–®–ò–• –§–û–ö–£–°–û–í</h3>
                    <p>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∞—Ä—Å–µ–Ω–∞–ª –∏–ª–ª—é–∑–∏–æ–Ω–∏—Å—Ç–∞ –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω—ã—Ö –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π.</p>
                </div>
                <div class="course-card" data-id="set_50" data-type="big">
                    <img src="images/set_new_50.png" alt="50 –ª—É—á—à–∏—Ö —Ñ–æ–∫—É—Å–æ–≤" class="card-image">
                    <h3>50 –õ–£–ß–®–ò–• –§–û–ö–£–°–û–í</h3>
                    <p>–°–∏–ª—å–Ω–∞—è –±–∞–∑–∞ –∏ —Ç–æ–ø–æ–≤—ã–µ —Ç—Ä—é–∫–∏. –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ ‚Äî –Ω–æ–º–µ—Ä 0.</p>
                </div>
                <div class="course-card" data-id="set_25_10" data-type="big">
                    <img src="images/set_new_35.png" alt="35 –ª—É—á—à–∏—Ö —Ñ–æ–∫—É—Å–æ–≤" class="card-image">
                    <h3>35 –õ–£–ß–®–ò–• –§–û–ö–£–°–û–í</h3>
                    <p>–ü–æ–ª–Ω–∞—è –ª–∏–Ω–µ–π–∫–∞: —Ñ—É—Ç–ª—è—Ä—ã, –ª–∞–º–ø—ã, –º–∞—Ä–∫–µ—Ä—ã –∏ –º–æ–Ω–µ—Ç—ã.</p>
                </div>

                <div class="course-card" data-id="set_green" data-type="small">
                    <img src="images/set_green.png" alt="10 –≤–∑—Ä—ã–≤–Ω—ã—Ö —Ñ–æ–∫—É—Å–æ–≤ (–∑–µ–ª—ë–Ω—ã–π)" class="card-image">
                    <h3>10 –í–ó–†–´–í–ù–´–• (–ó–ï–õ–Å–ù–´–ô)</h3>
                    <p>–ö—É–ø—é—Ä—ã, —Ä–µ–∑–∏–Ω–∫–∏ –∏ –ø–∞–∫–µ—Ç—ã: —Å–∏–ª—å–Ω—ã–µ –∫–∞—Ä–º–∞–Ω–Ω—ã–µ —Ç—Ä—é–∫–∏.</p>
                </div>
                <div class="course-card" data-id="set_blue" data-type="small">
                    <img src="images/set_blue.png" alt="10 –≤–∑—Ä—ã–≤–Ω—ã—Ö —Ñ–æ–∫—É—Å–æ–≤ (—Å–∏–Ω–∏–π)" class="card-image">
                    <h3>10 –í–ó–†–´–í–ù–´–• (–°–ò–ù–ò–ô)</h3>
                    <p>–ü–µ—á–µ–Ω—å–µ, —Ç—Ä–æ—Å—Ç—å, —Å—Ç–∞–∫–∞–Ω—ã –∏ –∑—Ä–µ–ª–∏—â–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã.</p>
                </div>
                <div class="course-card" data-id="set_purple" data-type="small">
                    <img src="images/set_purple.png" alt="10 –í–§ –î–≤–® (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)" class="card-image">
                    <h3>10 –í–§ –î–í–® (–§–ò–û–õ–ï–¢–û–í–´–ô)</h3>
                    <p>–ö—É–ø—é—Ä—ã, –∫–∞—Ä—Ç—ã –∏ –ø–ª–∞—Ç–∫–∏. 8‚Äì9 —É–±—Ä–∞–Ω—ã, —Å—Ä–∞–∑—É 10.</p>
                </div>
                <div class="course-card" data-id="set_orange" data-type="small">
                    <img src="images/set_orange.png" alt="10 –í–§ –î–≤–® (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)" class="card-image">
                    <h3>10 –í–§ –î–í–® (–ö–†–ê–°–ù–´–ô)</h3>
                    <p>–û—Ç –ø–æ—Ä–æ–ª–æ–Ω–æ–≤—ã—Ö —à–∞—Ä–∏–∫–æ–≤ –¥–æ —Ä–µ–∑–∏–Ω–æ–∫ ‚Ññ3. –ë–µ–∑ 7‚Äì9.</p>
                </div>
                <div class="course-card" data-id="set_5_best" data-type="small">
                    <img src="images/set5.png" alt="5 –ª—É—á—à–∏—Ö —Ñ–æ–∫—É—Å–æ–≤" class="card-image">
                    <h3>5 –õ–£–ß–®–ò–• –§–û–ö–£–°–û–í</h3>
                    <p>–°–∏–ª—å–Ω–µ–π—à–∏–µ —Ç—Ä—é–∫–∏ + –¥–≤–∞ –±–æ–Ω—É—Å–∞.</p>
                </div>
            </div>
        </div>
        <p id="swipe-hint" style="text-align: center; color: var(--primary-color); font-weight: 700; margin-top: 4px;">
            –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ ‚Äî —Å–≤–∞–π–ø–Ω–∏—Ç–µ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º. –ù–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ ‚Äî –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –∫–æ–ª–µ—Å–æ –º—ã—à–∏ –≤–±–æ–∫.
        </p>
    </section>

    <section id="lesson-list-view" class="hidden">
        <button class="back-button" onclick="showCourseSelection()">
            ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≤—ã–±–æ—Ä—É –Ω–∞–±–æ—Ä–æ–≤
        </button>
        <h2 id="lesson-list-title">–ù–∞–±–æ—Ä:</h2>

        <div class="placeholder-content" id="lessons-placeholder">
            <span class="placeholder-icon">üé¨</span>
            <p style="font-size: 1.0em; font-weight: 700; margin-bottom: 4px;">
                –£—Ä–æ–∫–∏ –¥–ª—è –Ω–∞–±–æ—Ä–∞ <span id="placeholder-course-name"></span> –∑–∞–≥—Ä—É–∂–µ–Ω—ã.
            </p>
            <p style="font-size: 0.9em;">
                –í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–∫ –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∏–∂–µ, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ.
            </p>
        </div>

        <ul id="lesson-list"></ul>
    </section>

    <section id="video-player-view" class="hidden">
        <button class="back-button" onclick="goBackToLessonList()">
            ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É —É—Ä–æ–∫–æ–≤
        </button>

        <p id="current-lesson-name-label">
            –°–º–æ—Ç—Ä–∏–º —É—Ä–æ–∫: <span id="current-lesson-name"></span>
        </p>

        <div class="video-player-container-kinescope">
            <iframe
                id="kinescope-player"
                src=""
                allow="autoplay; fullscreen; picture-in-picture; encrypted-media; gyroscope; accelerometer; clipboard-write; screen-wake-lock;"
                frameborder="0"
                allowfullscreen>
            </iframe>
            <img id="video-thumbnail-large" class="video-thumbnail-large" src="" alt="–ü—Ä–µ–≤—å—é —É—Ä–æ–∫–∞">
        </div>

        <div id="no-video-warning" class="placeholder-content hidden">
            <span class="placeholder-icon">üö´</span>
            <p style="font-size: 0.95em; font-weight: 700;">
                –î–ª—è —ç—Ç–æ–≥–æ —É—Ä–æ–∫–∞ –ø–æ–∫–∞ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –≤–∏–¥–µ–æ—Ä–æ–ª–∏–∫.
            </p>
            <p style="font-size: 0.85em;">
                –ö–∞–∫ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏–º –∫–æ–¥ Kinescope ‚Äî –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –≤–∏–¥–µ–æ.
            </p>
        </div>
    </section>
</main>

<div id="registration-overlay" class="registration-overlay hidden">
    <div class="registration-modal">
        <h2 id="modal-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
        <div id="modal-content-container" class="modal-content-container">

            <div id="policy-initial-view">
                <p>–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—É—á–µ–Ω–∏—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è —Å –ü–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏.</p>
                <div class="action-buttons">
                    <button id="read-policy-btn" class="form-button">–ü—Ä–æ—á–∏—Ç–∞—Ç—å –ü–æ–ª–∏—Ç–∏–∫—É</button>
                    <button id="agree-and-continue-btn" class="form-button">–°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
                </div>
            </div>

            <div id="policy-full-view" class="hidden">
                <p><b>–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–µ–π—Å—Ç–≤—É—é—â–µ–π —Ä–µ–¥–∞–∫—Ü–∏–∏: 1 —Å–µ–Ω—Ç—è–±—Ä—è 2025 –≥–æ–¥–∞</b></p>
                <div class="policy-text-container">
                    <p>1. –û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è, —Å—Ç–æ—Ä–æ–Ω—ã, —Ü–µ–ª—å –¥–æ–∫—É–º–µ–Ω—Ç–∞...</p>
                </div>
                <button id="agree-final-btn" class="form-button">–°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è —Å –ü–æ–ª–∏—Ç–∏–∫–æ–π</button>
            </div>

            <div id="registration-form-view" class="hidden">
                <form id="registration-form">
                    <div class="form-group">
                        <label for="reg-name">–§–∞–º–∏–ª–∏—è –∏ –ò–º—è:</label>
                        <input type="text" id="reg-name" name="name" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω">
                    </div>
                    <div class="form-group">
                        <label for="reg-age">–í–æ–∑—Ä–∞—Å—Ç:</label>
                        <input type="number" id="reg-age" name="age" min="1" max="120" required>
                    </div>
                    <div class="form-group">
                        <label for="reg-phone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:</label>
                        <input type="tel" id="reg-phone" name="phone" pattern="\+?[0-9]{10,15}" required placeholder="+79123456789">
                    </div>
                    <div class="form-group hidden">
                        <label for="reg-tg-id">Telegram ID (–°–∫—Ä—ã—Ç–æ):</label>
                        <input type="text" id="reg-tg-id" name="tg_id">
                    </div>
                    <button type="submit" id="submit-reg-btn" class="form-button">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –Ω–∞—á–∞—Ç—å</button>
                </form>
            </div>

            <div id="success-view" class="hidden" style="text-align: center;">
                <h3 style="color: green;">üéâ –£—Å–ø–µ—à–Ω–æ!</h3>
                <p>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ –æ–±—É—á–µ–Ω–∏—é.</p>
                <button onclick="hideRegistrationModal()" class="back-button">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
            </div>

            <div id="loading-spinner" class="loading-spinner hidden">
                –ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö... üöÄ –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...
            </div>

        </div>
    </div>
</div>

<script>
    // === 0. –ö–û–ù–°–¢–ê–ù–¢–´ ===
    const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycby2R4j1aBQ2zmybXyqjVhgFntoduCYYX6AuZ8kMmRUWdF8ZQCNTTpPij0kmxaSxAZmjvg/exec';
    const IMAGE_BASE_URL = 'images/';
    const USER_STORAGE_KEY = 'magic_course_user_registered_hat';
    const TG_ID_STORAGE_KEY = 'magic_course_tg_id_hat';

    // === 1. –ù–ê–ë–û–† "75 –ª—É—á—à–∏—Ö —Ñ–æ–∫—É—Å–æ–≤" (–û–ë–ù–û–í–õ–ï–ù–ù–´–ô –°–ü–ò–°–û–ö, –ü–ê–ü–ö–ê Set75) ===
    // –í–Ω–∏–º–∞–Ω–∏–µ: –ò–∑-–∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è "–§–æ–∫—É—Å —Å —Ç—Ä—É–±–æ—á–∫–∞–º–∏ ‚Ññ9" –Ω–∞ –ø–æ–∑–∏—Ü–∏—é 24,
    // –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –≤–∏–¥–µ–æ ID —Å–¥–≤–∏–Ω—É—Ç—ã –Ω–∞ –æ–¥–Ω—É –ø–æ–∑–∏—Ü–∏—é –≤–Ω–∏–∑ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π.
    const set75Lessons = [
      { name: '–§–æ–∫—É—Å —Å –º–æ–Ω–µ—Ç–∫–æ–π –∏ —Å—Ç–∞–∫–∞–Ω–æ–º ‚Ññ1', videoId: '08Kx6GWfuLJ15VVLB9wZRg', imageUrl: `${IMAGE_BASE_URL}Set75/1.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –º–æ–Ω–µ—Ç–∫–æ–π –∏ —Å—Ç–∞–∫–∞–Ω–æ–º ‚Ññ2', videoId: '4FHn2u9avtFz5y5edoaKZn', imageUrl: `${IMAGE_BASE_URL}Set75/2.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å–æ —Å—Ç–∞–∫–∞–Ω–æ–º', videoId: 'iwYebxbfYgsWiSavnG6f73', imageUrl: `${IMAGE_BASE_URL}Set75/3.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –º–æ–Ω–µ—Ç–∫–æ–π –∏ —Å—Ç–∞–∫–∞–Ω–æ–º ‚Ññ3', videoId: 'k1A2Gu5q9jt1Ergg13B2xN', imageUrl: `${IMAGE_BASE_URL}Set75/4.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –ø–ª–∞—Ç–∫–æ–º –∏ –ø–ª–∞—Å—Ç–∏–Ω–∫–æ–π', videoId: 'vB8PZ3bum4EmiCjz1s7p2e', imageUrl: `${IMAGE_BASE_URL}Set75/5.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –ø–ª–∞—Ç–∫–æ–º –∏ —Ä—É—á–∫–æ–π', videoId: 'nMsgE7FV9egrpvLV842tof', imageUrl: `${IMAGE_BASE_URL}Set75/6.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –º–∞–≥–Ω–∏—Ç–∞–º–∏ –∏ —Å—Ç–∞–∫–∞–Ω–æ–º', videoId: '6r3pPfgPBdLiAU1aH1dSE1', imageUrl: `${IMAGE_BASE_URL}Set75/7.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —à–∞—Ä–∏–∫–æ–º –∏ —Å—Ç–∞–∫–∞–Ω–æ–º', videoId: 'tet1Tag2mdzR5PTSaCpdJQ', imageUrl: `${IMAGE_BASE_URL}Set75/8.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Å–∏–ª–∏–∫–æ–Ω–æ–≤–æ–π –º–∞—Ç–µ—Ä–∏–µ–π –∏ –º–æ–Ω–µ—Ç–æ–π', videoId: '3N8d6wnNCJXAsmfor37Z6C', imageUrl: `${IMAGE_BASE_URL}Set75/9.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –±—É–º–∞–∂–Ω—ã–º —Å—Ç–∞–∫–∞–Ω—á–∏–∫–æ–º ‚Ññ1', videoId: 'eDXSZnJPXwxNWPkbqA1GFo', imageUrl: `${IMAGE_BASE_URL}Set75/10.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –±—É–º–∞–∂–Ω—ã–º —Å—Ç–∞–∫–∞–Ω—á–∏–∫–æ–º ‚Ññ2', videoId: 'rcmNCKZFbdqFFTNroutiYN', imageUrl: `${IMAGE_BASE_URL}Set75/11.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å–æ —Å—Ç–∞–∫–∞–Ω–æ–º —Å –∂–∏–¥–∫–æ—Å—Ç—å—é', videoId: 'a381iv6Ly1Q8ZdCrWG1j2Q', imageUrl: `${IMAGE_BASE_URL}Set75/12.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –≤–æ–∑–¥—É—à–Ω—ã–º —à–∞—Ä–∏–∫–æ–º', videoId: 'suppep3Dju2U1ZAeti1Ueh', imageUrl: `${IMAGE_BASE_URL}Set75/13.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–æ—Ä–æ–±–æ—á–∫–æ–π —Å —à–∞—Ä–∏–∫–æ–º', videoId: '5NX3JZh6W3trGYAYCcrrwq', imageUrl: `${IMAGE_BASE_URL}Set75/14.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –±—É—Ç—ã–ª–∫–æ–π –∏ –æ—Å—å–º–∏–Ω–æ–≥–æ–º', videoId: 'osEDVw8PfuNgWAAYFzdDci', imageUrl: `${IMAGE_BASE_URL}Set75/15.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ç—Ä—É–±–æ—á–∫–∞–º–∏ ‚Ññ1', videoId: '2K9LBkR7qGDDnbqf55VQ3P', imageUrl: `${IMAGE_BASE_URL}Set75/16.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ç—Ä—É–±–æ—á–∫–∞–º–∏ ‚Ññ2', videoId: '4qK7Q3Nar6yrCJ4iLhYutr', imageUrl: `${IMAGE_BASE_URL}Set75/17.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ç—Ä—É–±–æ—á–∫–∞–º–∏ ‚Ññ3', videoId: 'sCxSEjrysf1NkoYJXBNqbr', imageUrl: `${IMAGE_BASE_URL}Set75/18.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ç—Ä—É–±–æ—á–∫–∞–º–∏ ‚Ññ4', videoId: 'quCvhgExNKs6ckrRRsp5Xe', imageUrl: `${IMAGE_BASE_URL}Set75/19.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ç—Ä—É–±–æ—á–∫–∞–º–∏ ‚Ññ5', videoId: '3UG5pnU1eeK6qMxmkS4sDk', imageUrl: `${IMAGE_BASE_URL}Set75/20.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ç—Ä—É–±–æ—á–∫–∞–º–∏ ‚Ññ6', videoId: 'xf5gR8ziY4UUxTZrVcPYUW', imageUrl: `${IMAGE_BASE_URL}Set75/21.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ç—Ä—É–±–æ—á–∫–∞–º–∏ ‚Ññ7', videoId: '7D2Pyu2hVPkaQcvfdSDnSn', imageUrl: `${IMAGE_BASE_URL}Set75/22.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ç—Ä—É–±–æ—á–∫–∞–º–∏ ‚Ññ8', videoId: '4nAZBgzGS9fs2uav9ko136', imageUrl: `${IMAGE_BASE_URL}Set75/23.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ç—Ä—É–±–æ—á–∫–∞–º–∏ ‚Ññ9', videoId: '', imageUrl: `${IMAGE_BASE_URL}Set75/24.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ä—É—á–∫–æ–π ‚Ññ1', videoId: '2Ge2y8YGMW6W5hjjv1toy9', imageUrl: `${IMAGE_BASE_URL}Set75/25.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ä—É—á–∫–æ–π –∏ –∫—É–ø—é—Ä–æ–π ‚Ññ1', videoId: 'oq3Eq1vonpJQ9gt1C7qaS6', imageUrl: `${IMAGE_BASE_URL}Set75/26.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –≤–æ–ª—à–µ–±–Ω–æ–π –ø–∞–ª–æ—á–∫–æ–π ‚Ññ1', videoId: 'cUK7UtoqNS6aHZb7MUhKJf', imageUrl: `${IMAGE_BASE_URL}Set75/27.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ä—É—á–∫–æ–π –∏ –∫—É–ø—é—Ä–æ–π ‚Ññ2', videoId: '4crYByNehEmS3Pw5xydY8U', imageUrl: `${IMAGE_BASE_URL}Set75/28.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –≤–æ–ª—à–µ–±–Ω–æ–π —Ç—Ä–æ—Å—Ç—å—é', videoId: '0BhyKpcf17f4AXPLSkdGQU', imageUrl: `${IMAGE_BASE_URL}Set75/29.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –ø–µ—á–µ–Ω—å–µ–º', videoId: 'hbcu7w4WB2mTi1YTrTwW1A', imageUrl: `${IMAGE_BASE_URL}Set75/30.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ä–∞—Å–∫—Ä–∞—Å–∫–æ–π', videoId: 'bxQHGnDfqkb89pbu9CCo3H', imageUrl: `${IMAGE_BASE_URL}Set75/31.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –±—É–ª–∞–≤–∫–æ–π —Å–æ —Å–ø–∏—á–∫–æ–π', videoId: '5ZxzLHp5E5psTbddjLaTNM', imageUrl: `${IMAGE_BASE_URL}Set75/32.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –º–æ–Ω–µ—Ç–∫–æ–π ‚Ññ1', videoId: '0FKMpLiKdNu37ivBzHf8LS', imageUrl: `${IMAGE_BASE_URL}Set75/33.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –º–æ–Ω–µ—Ç–∫–æ–π –∏ –ª–µ–¥–µ–Ω—Ü–æ–º', videoId: 'oBLcgZeiP2txJM9vmENCkG', imageUrl: `${IMAGE_BASE_URL}Set75/34.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫—Ä—É–≥–ª–æ–π —à–∫–∞—Ç—É–ª–∫–æ–π', videoId: 'xwjShnyz358X56Gmw1b1J2', imageUrl: `${IMAGE_BASE_URL}Set75/35.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –≤–æ–ª—à–µ–±–Ω–æ–π –ø–∞–ª–æ—á–∫–æ–π ‚Ññ2', videoId: 'egJeHpt8N8eBgxUH8PpMtx', imageUrl: `${IMAGE_BASE_URL}Set75/36.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫—É–≤—à–∏–Ω–æ–º', videoId: 'rCnFZyShmj1aw38pQni85Y', imageUrl: `${IMAGE_BASE_URL}Set75/37.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π —à–∫–∞—Ç—É–ª–∫–æ–π', videoId: 'dSiZqEQkN3WFokSwQx2hZ6', imageUrl: `${IMAGE_BASE_URL}Set75/38.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –ø—É—à–∏—Å—Ç–∏–∫–æ–º –ë–∞–π–ª–∞', videoId: 'tQowRoUYHFa7PVRqWaXPnL', imageUrl: `${IMAGE_BASE_URL}Set75/39.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–æ–ª–æ–¥–æ–π –≤ —Ñ—É—Ç–ª—è—Ä–µ', videoId: 'caWeZpxqUvnseP15fVYcRh', imageUrl: `${IMAGE_BASE_URL}Set75/40.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ä—É—á–∫–æ–π ‚Ññ2', videoId: 'dCY6qS39XBACXPNxh64Xhx', imageUrl: `${IMAGE_BASE_URL}Set75/41.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫—Ä—ã—à–∫–∞–º–∏', videoId: 'gMCYd4fnqmWLeXYSVRNtbo', imageUrl: `${IMAGE_BASE_URL}Set75/42.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –≤–µ—Ä—ë–≤–∫–æ–π', videoId: 'dqoeyZ1K93Zc9tFzSBjpND', imageUrl: `${IMAGE_BASE_URL}Set75/43.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –º–æ–Ω–µ—Ç–∫–æ–π ‚Ññ2', videoId: '0grSSEB315A3f2NcQKyXMa', imageUrl: `${IMAGE_BASE_URL}Set75/44.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –º–æ–Ω–µ—Ç–∫–æ–π ‚Ññ3', videoId: '0yXkYxUkvEdzpsz2HKVmex', imageUrl: `${IMAGE_BASE_URL}Set75/45.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –º–æ–Ω–µ—Ç–∫–æ–π –∏ –±—É—Ç—ã–ª–∫–æ–π', videoId: '5ruZSqV2cyPrNS1JDDhfmb', imageUrl: `${IMAGE_BASE_URL}Set75/46.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏', videoId: 'ifq98xGLDDuLUTg51iSWWK', imageUrl: `${IMAGE_BASE_URL}Set75/47.jpeg`, duration: '' },
      { name: '–í–Ω–∏–º–∞–Ω–∏–µ: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞ –¥–∏—Å–∫–µ (–£–≥–∞–¥–∞—é —Ç–≤–æ—é –∫–∞—Ä—Ç—É)', videoId: '', imageUrl: `${IMAGE_BASE_URL}Set75/48.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ —Å –¥–µ—Å–µ—Ä—Ç–∞–º–∏', videoId: 'jnYhSV2iDrqRZ58rX1Q5to', imageUrl: `${IMAGE_BASE_URL}Set75/49.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–æ—á–∫–æ–π ‚Äú–î–∞–π –ø—è—Ç—å‚Äù', videoId: 'jNQZYyMxM6Psv3aEQph7d4', imageUrl: `${IMAGE_BASE_URL}Set75/50.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –±–∞–Ω–æ—á–∫–æ–π —Å –∫—É–±–∏–∫–æ–º', videoId: '2H1jE5fv7erQmXfrGzmxq2', imageUrl: `${IMAGE_BASE_URL}Set75/51.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫—É–±–∏–∫–∞–º–∏', videoId: 'oTZDwfWj7oTBu4yD2JXLZs', imageUrl: `${IMAGE_BASE_URL}Set75/52.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –ª–∏—Å—Ç–æ–º –±—É–º–∞–≥–∏', videoId: 'uXQE4Y3SU3Lb7YMnKT3jmT', imageUrl: `${IMAGE_BASE_URL}Set75/53.jpeg`, duration: '' },
      { name: '–í–Ω–∏–º–∞–Ω–∏–µ: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞ –¥–∏—Å–∫–µ (–£–≥–∞–¥–∞—é –∑–∞–¥—É–º–∞–Ω–Ω–æ–µ –∑—Ä–∏—Ç–µ–ª–µ–º, —Å —Å–æ–æ–±—â–Ω–∏–∫–æ–º)', videoId: '', imageUrl: `${IMAGE_BASE_URL}Set75/54.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–æ–ª–æ–¥–æ–π –∫–∞—Ä—Ç ‚Ññ1', videoId: '22QyaLJACfbBWveFoWPB4W', imageUrl: `${IMAGE_BASE_URL}Set75/55.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–æ–ª–æ–¥–æ–π –∫–∞—Ä—Ç ‚Ññ2', videoId: 'w84xxUQNgY4ahTDtgvR7wt', imageUrl: `${IMAGE_BASE_URL}Set75/56.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–æ–ª–æ–¥–æ–π –∫–∞—Ä—Ç ‚Ññ3', videoId: 'iz78bQfjMiJTzdtAqS5fGt', imageUrl: `${IMAGE_BASE_URL}Set75/57.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–æ–ª–æ–¥–æ–π –∫–∞—Ä—Ç ‚Ññ4', videoId: '84CSAV9U3anYLEjsJUDdpc', imageUrl: `${IMAGE_BASE_URL}Set75/58.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–æ–ª–æ–¥–æ–π –∫–∞—Ä—Ç ‚Ññ5', videoId: 'ekMb5PEruDL7E952AEpZji', imageUrl: `${IMAGE_BASE_URL}Set75/59.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–æ–ª–æ–¥–æ–π –∫–∞—Ä—Ç —Å —á–µ–ª–æ–≤–µ—á–∫–æ–º', videoId: 'a4JeWQCkqSLTZZMAW818YW', imageUrl: `${IMAGE_BASE_URL}Set75/60.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–∞–º–∏ ‚Ññ1', videoId: 'g1PFvTYHreDSyj4wbrzMDs', imageUrl: `${IMAGE_BASE_URL}Set75/61.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–∞–º–∏ ‚Ññ2', videoId: 'qYGrHajXj481fCG1mZfF3d', imageUrl: `${IMAGE_BASE_URL}Set75/62.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–∞–º–∏ ‚Ññ3', videoId: 'a3csho4mnthBXHoaQJq5oB', imageUrl: `${IMAGE_BASE_URL}Set75/63.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–∞–º–∏ ‚Ññ4', videoId: 'gDa3MWw7tjjswRHiRnN7wN', imageUrl: `${IMAGE_BASE_URL}Set75/64.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä—É–∫', videoId: 'hgcwhFh2BpmXqfKKJZaTNv', imageUrl: `${IMAGE_BASE_URL}Set75/65.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–∞–º–∏ ‚Ññ5', videoId: '7Lgt1C8Bwbg4nFbD9rHfr3', imageUrl: `${IMAGE_BASE_URL}Set75/66.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–æ—à–µ–ª—å–∫–æ–º —Å –∫–∞—Ä—Ç–∞–º–∏', videoId: 'ahtEMk8QwNqhrWco8uoTYz', imageUrl: `${IMAGE_BASE_URL}Set75/67.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–∞–º–∏ ‚Ññ1', videoId: '7asYipHJNxxQKntnpVWqoa', imageUrl: `${IMAGE_BASE_URL}Set75/68.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –º–æ–Ω–µ—Ç–∫–æ–π –∏ –∫—É–ø—é—Ä–æ–π', videoId: 'eB9NGLCP5dAXARRikmcdEm', imageUrl: `${IMAGE_BASE_URL}Set75/69.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π', videoId: 'fLq4jibjivVwxSdXWLAvGp', imageUrl: `${IMAGE_BASE_URL}Set75/70.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–∞–º–∏ ‚Ññ2', videoId: 'jD9gcu7q8ueA4WYAmG9ru6', imageUrl: `${IMAGE_BASE_URL}Set75/71.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π –∏ –∫—É–ø—é—Ä–æ–π', videoId: 'iBDgbkmsWR5auygAR8Q7jk', imageUrl: `${IMAGE_BASE_URL}Set75/72.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫—É–ø—é—Ä–æ–π –∏ –±—É–º–∞–∂–∫–æ–π', videoId: '4xKuVdUEDwtxQZju6VzAKv', imageUrl: `${IMAGE_BASE_URL}Set75/73.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫—É–ø—é—Ä–∞–º–∏', videoId: 'j7b24mjPkfeYggjfxJy27D', imageUrl: `${IMAGE_BASE_URL}Set75/74.jpeg`, duration: '' },
      { name: '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–æ—á–∫–æ–π –∫–ª–æ—É–Ω–∞', videoId: '', imageUrl: `${IMAGE_BASE_URL}Set75/75.jpeg`, duration: '' }
    ];

    // === 2. –ù–ê–ë–û–† "50 –ª—É—á—à–∏—Ö —Ñ–æ–∫—É—Å–æ–≤" ===
    const set50Names = [
        "–û –Ω–∞–±–æ—Ä–µ",
        "–§–æ–∫—É—Å —Å –≤–æ–ª—à–µ–±–Ω–æ–π –ø–∞–ª–æ—á–∫–æ–π –∏ –≥–æ—Ä—à–æ—á–∫–æ–º",
        "–§–æ–∫—É—Å —Å –≤–æ–ª—à–µ–±–Ω–æ–π –ø–∞–ª–æ—á–∫–æ–π –∏ –∫—É–±–∏–∫–æ–º",
        "–§–æ–∫—É—Å —Å –≤–æ–ª—à–µ–±–Ω–æ–π –ø–∞–ª–æ—á–∫–æ–π ‚Ññ1",
        "–§–æ–∫—É—Å —Å —á–∏—Å–ª–æ–≤—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏",
        "–§–æ–∫—É—Å —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º –≤–µ—Ä—ë–≤–∫–∏",
        "–§–æ–∫—É—Å —Å –∏–≥—Ä–∞–ª—å–Ω—ã–º –∫—É–±–∏–∫–æ–º",
        "–§–æ–∫—É—Å —Å –±–∞–Ω–æ—á–∫–æ–π —Å –∫—É–±–∏–∫–∞–º–∏",
        "–§–æ–∫—É—Å —Å –ø–ª–∞—Ç–∫–æ–º –∏ –Ω–∞–ø–∞–ª—å—á–Ω–∏–∫–æ–º",
        "–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–æ–π —Å –ª–µ—Å–∫–æ–π –∏ —Å–ø–∏—á–∫–æ–π",
        "–§–æ–∫—É—Å —Å —Ä–∞–∑–Ω–æ—Ü–≤–µ—Ç–Ω—ã–º–∏ –ø–ª–∞—Ç–∫–∞–º–∏",
        "–§–æ–∫—É—Å —Å –∫–æ–ª—å—Ü–æ–º –∏ —Ü–µ–ø–æ—á–∫–æ–π",
        "–§–æ–∫—É—Å —Å –∫–æ–ª—å—Ü–æ–º –∏ —Ä–µ–∑–∏–Ω–∫–æ–π",
        "–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π ‚Ññ1",
        "–§–æ–∫—É—Å —Å —Å–µ—Ä–¥–µ—á–∫–∞–º–∏ ‚Ññ1",
        "–§–æ–∫—É—Å —Å —Å–µ—Ä–¥–µ—á–∫–∞–º–∏ ‚Ññ2",
        "–§–æ–∫—É—Å —Å –±–∞—à–µ–Ω–∫–æ–π —Å —à–∞—Ä–∏–∫–æ–º",
        "–§–æ–∫—É—Å —Å —à–∞—Ä–∏–∫–æ–º",
        "–§–æ–∫—É—Å —Å–æ —Å—Ç–∞–∫–∞–Ω–∞–º–∏ –∏ —à–∞—Ä–∏–∫–∞–º–∏",
        "–§–æ–∫—É—Å —Å–æ —Å—Ç–∞–∫–∞–Ω–æ–º ‚Ññ1",
        "–§–æ–∫—É—Å —Å –¥–≤–æ–π–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏",
        "–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π ‚Ññ2",
        "–§–æ–∫—É—Å —Å –≤–µ—Ä—ë–≤–∫–æ–π ‚Ññ1",
        "–§–æ–∫—É—Å —Å –ª–∏—Å—Ç–æ–º –±—É–º–∞–≥–∏",
        "–§–æ–∫—É—Å —Å –º–æ–Ω–µ—Ç–∫–æ–π",
        "–§–æ–∫—É—Å —Å –Ω–∞–ø–∞–ª—å—á–Ω–∏–∫–æ–º",
        "–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–æ–π —Å–æ —Å—Ç–≤–æ—Ä–∫–æ–π",
        "–§–æ–∫—É—Å —Å –≤–µ—Ä—ë–≤–∫–æ–π –∏ —Å–ø–∏—á–µ—á–Ω—ã–º –∫–æ—Ä–æ–±–∫–æ–º",
        "–§–æ–∫—É—Å —Å–æ —Å–ø–∏—á–µ—á–Ω—ã–º –∫–æ—Ä–æ–±–∫–æ–º ‚Ññ1",
        "–§–æ–∫—É—Å —Å —Å–µ—Ä–¥–µ—á–∫–∞–º–∏ ‚Ññ3",
        "–§–æ–∫—É—Å —Å–æ —Å–ø–∏—á–µ—á–Ω—ã–º –∫–æ—Ä–æ–±–∫–æ–º ‚Ññ2",
        "–§–æ–∫—É—Å —Å —Å–∞–ª—Ñ–µ—Ç–∫–æ–π",
        "–§–æ–∫—É—Å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞–ª—å—Ü–µ–≤",
        "–§–æ–∫—É—Å —Å–æ —Å–ø–∏—á–∫–∞–º–∏ ‚Ññ1",
        "–§–æ–∫—É—Å —Å–æ —Å–ø–∏—á–∫–∞–º–∏ ‚Ññ2",
        "–§–æ–∫—É—Å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä—É–∫",
        "–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–∞–º–∏ ‚Ññ1",
        "–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π ‚Ññ3",
        "–§–æ–∫—É—Å —Å–æ —Å–ø–∏—á–µ—á–Ω—ã–º –∫–æ—Ä–æ–±–∫–æ–º –∏ –≤–æ–∑–¥—É—à–Ω—ã–º —à–∞—Ä–∏–∫–æ–º",
        "–§–æ–∫—É—Å —Å–æ —Å—Ç–∞–∫–∞–Ω–æ–º —Å –∂–∏–¥–∫–æ—Å—Ç—å—é",
        "–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–∞–º–∏ ‚Ññ2",
        "–§–æ–∫—É—Å —Å –≤–µ—Ä—ë–≤–∫–æ–π ‚Ññ2",
        "–§–æ–∫—É—Å —Å –≤–µ—Ä—ë–≤–∫–æ–π ‚Ññ3",
        "–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–æ–π –∏ –∫—É–ø—é—Ä–æ–π",
        "–§–æ–∫—É—Å —Å –∫–æ–ª—å—Ü–æ–º",
        "–§–æ–∫—É—Å —Å–æ —Å–ª–æ–∂–µ–Ω–Ω–æ–π –∫—É–ø—é—Ä–æ–π",
        "–§–æ–∫—É—Å —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ ‚Ññ1",
        "–§–æ–∫—É—Å —Å–æ —Å—Ç–∞–∫–∞–Ω–æ–º ‚Ññ2",
        "–§–æ–∫—É—Å —Å –∫—É–ø—é—Ä–æ–π —Å–æ —Å–∫—Ä–µ–ø–∫–∞–º–∏",
        "–§–æ–∫—É—Å —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ ‚Ññ2",
        "–§–æ–∫—É—Å —Å –≤–æ–ª—à–µ–±–Ω–æ–π –ø–∞–ª–æ—á–∫–æ–π ‚Ññ2"
    ];

    const set50Ids = [
        "3ToVuRrRbETNc9CS8dK6PN",
        "bASv2KDXm3exPSJhXijGv7",
        "k7LVHDdYbLP6nJHeE78jZZ",
        "gBuMcScL9G2Tctsq4nV53o",
        "kQRzENqLzFHbN9zoSkELur",
        "wzotde87eg2SCza8ifUMTV",
        "8PiozEkZ2ShCxqhyMkGTC6",
        "sCuBGxqbufwwyfyTR875v1",
        "n16yQfgApriXzJve1fJTGh",
        "6AMFukucjvC3pGK8iyH4Et",
        "tyW2R4vq5BzFFMy95zdDM3",
        "5NdmGkdYeLpa5FT5X64bn8",
        "nJNkwpMN2QY6twvXmLwcBD",
        "2Fu99zt3jN8X2opw8ZXuAr",
        "8SFRsCyg5EpppTctLvPHR6",
        "vNP61NmohuHVddHan6cdUj",
        "3KN6yrnnmiotcqPKjy6c7C",
        "vehKRwE4NzTi4yaMJkxcSv",
        "qTTKJXx4oFuhbKuZAeKnDq",
        "jaj5LtYzdQZa3Q9XBg6ydm",
        "o4KKfSfM3ojWhJbGqZGHQH",
        "jLMFoYJxp9oskaD77C8jWP",
        "kAPviofbQ9ZZ54HdJF9Wtw",
        "7bjn4Vj2Rc4qbHCF86ut78",
        "3j2wei9949NT9fWMUqrNKh",
        "2xBJbT1mLo9ZdYx1THsPpb",
        "7PnVtftEgskF1LXb7b1YPp",
        "8JeakD88Y9SCkgWRkRrryW",
        "g4YY8iCjqRUwp9RYzBnJCj",
        "eYiXB7XWaSahT47YvaBAJS",
        "c69d54HhkmgjSrgyXtpCTE",
        "hpQTFLA3tgvfiXsN9K7AYK",
        "ciAQ7xRb8hS9DXHKvgFCKc",
        "m8YVCXwW2ei7fUxZ5cZ4c2",
        "rQecge353H6iCLYhtfdP1b",
        "a4RGrJXp1bdPZhqBwMUErz",
        "qRDCo5oqBcAbE33GegxQR7",
        "74Kn1XNY1tK3Qc3gotYVbx",
        "fVrETbquXomMmrf6DGz9xc",
        "u5TLFJpLzzGtxfBbZBo9ey",
        "aBWpSUmQvP9gqwf1UorosR",
        "wtMN3Q3zu5AFg5f93aPtyk",
        "wzNwHj9nqZ3XYwh4PgNk3y",
        "wZxGXN8MVxRkM3qtfMmdw5",
        "pQqNbBfFoxjRptWxZWTuKn",
        "iNE6ZoZkS9X8PQajd9cRdb",
        "hJvSAUQLGSLS5QiAwLr4P8",
        "pb3qbXi6CxM4CYCLEA5Qxn",
        "kkem4qCQPo8tfSkE2BSD3u",
        "6dPvUz1Br9NzPJB8rSfzfn",
        "fdnxr9H6yFkHK8SmuKs35X"
    ];

    const set50Lessons = set50Names.map((name, index) => ({
        name,
        duration: '',
        videoId: set50Ids[index] || '',
        imageUrl: `${IMAGE_BASE_URL}set50/${String(index).padStart(2, '0')}.webp`
    }));

    // === 3. –ù–ê–ë–û–† "35 –ª—É—á—à–∏—Ö —Ñ–æ–∫—É—Å–æ–≤" (25+10, —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏) ===
    const set25_10Names = [
        '–§–æ–∫—É—Å —Å –≤–æ–ª—à–µ–±–Ω—ã–º —Ñ—É—Ç–ª—è—Ä–æ–º ‚Ññ1',
        '–§–æ–∫—É—Å —Å —á–∏—Å–ª–æ–≤–æ–π –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–æ–π ‚Ññ1',
        '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–∞–º–∏ —Å —Å–∏–º–≤–æ–ª–∞–º–∏ ‚Ññ1',
        '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–∞–º–∏ —Å —Å–∏–º–≤–æ–ª–∞–º–∏ ‚Ññ2',
        '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–∞–º–∏ —Å —Å–∏–º–≤–æ–ª–∞–º–∏ ‚Ññ3',
        '–§–æ–∫—É—Å —Å –ø–æ—Ä–æ–ª–æ–Ω–æ–≤—ã–º–∏ —à–∞—Ä–∏–∫–∞–º–∏ –∏ –∫—É–±–∏–∫–æ–º',
        '–§–æ–∫—É—Å —Å –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–æ–π',
        '–§–æ–∫—É—Å —Å –∫–æ—à–∫–∞–º–∏',
        '–§–æ–∫—É—Å —Å –±—É–º–∞–∂–Ω—ã–º –ø–∞–∫–µ—Ç–æ–º',
        '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–æ–π –∏ –º–æ–Ω–µ—Ç–∫–æ–π',
        '–§–æ–∫—É—Å —Å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ–º',
        '–§–æ–∫—É—Å —Å–æ —à–∫–∞—Ç—É–ª–∫–æ–π —Å –∫—É–±–∏–∫–∞–º–∏ ‚Ññ1',
        '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–æ–π –∏ –ø–∞–∫–µ—Ç–∏–∫–æ–º',
        '–§–æ–∫—É—Å —Å –º–∞–ª–µ–Ω—å–∫–æ–π –∫–æ–ª–æ–¥–æ–π',
        '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–æ–π',
        '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π –∏ –∫—É–ø—é—Ä–æ–π',
        '–§–æ–∫—É—Å —Å –≤–æ–ª—à–µ–±–Ω–æ–π –ª–∞–º–ø–æ–π ‚Ññ1',
        '–§–æ–∫—É—Å —Å –∫—É–ø—é—Ä–æ–π –≤ –∫–≤–∞–¥—Ä–∞—Ç',
        '–§–æ–∫—É—Å —Å –∫—É–ø—é—Ä–æ–π —Å –æ–∫–æ—à–∫–æ–º',
        '–§–æ–∫—É—Å —Å –≤–æ–ª—à–µ–±–Ω—ã–º–∏ –ø–∞–ª–æ—á–∫–∞–º–∏',
        '–§–æ–∫—É—Å —Å –º–æ–Ω–µ—Ç–∫–æ–π ‚Ññ1',
        '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π',
        '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–∞–º–∏ ‚Ññ1',
        '–§–æ–∫—É—Å —Å —á–∏—Å–ª–æ–≤–æ–π –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–æ–π ‚Ññ2',
        '–§–æ–∫—É—Å —Å –º–æ–Ω–µ—Ç–∫–∞–º–∏',
        '–§–æ–∫—É—Å —Å –≤–æ–ª—à–µ–±–Ω—ã–º —Ñ—É—Ç–ª—è—Ä–æ–º ‚Ññ2',
        '–§–æ–∫—É—Å —Å–æ —à–∫–∞—Ç—É–ª–∫–æ–π —Å –∫—É–±–∏–∫–∞–º–∏ ‚Ññ2',
        '–¢—Ä–∏ —Ñ–æ–∫—É—Å–∞ —Å –º–∞—Ä–∫–µ—Ä–æ–º',
        '–§–æ–∫—É—Å —Å –º–∞—Ä–∫–µ—Ä–æ–º',
        '–§–æ–∫—É—Å —Å –º–æ–Ω–µ—Ç–∫–æ–π –∏ –∫—É–ø—é—Ä–æ–π',
        '–§–æ–∫—É—Å —Å –º–æ–Ω–µ—Ç–∫–æ–π ‚Ññ2'
    ];

    const set25_10Lessons = [
        { videoId: '34tV6z86qCU9mKcK1KhtDi', imageUrl: `${IMAGE_BASE_URL}set25_10/01.webp` },
        { videoId: '3GcEheiYDUBStRvxNLRkYy', imageUrl: `${IMAGE_BASE_URL}set25_10/02.webp` },
        { videoId: 'fkG8XqCMHF4MVHQRJzmQdo', imageUrl: `${IMAGE_BASE_URL}set25_10/03.webp` },
        { videoId: 'oRZAQoNV97ZvSgUmAkDx5W', imageUrl: `${IMAGE_BASE_URL}set25_10/04.webp` },
        { videoId: 'dAKBfrkpptfCKithMVbwt9', imageUrl: `${IMAGE_BASE_URL}set25_10/05.webp` },
        { videoId: 'ty4PuJ2GNbLtT8usHtbzu3', imageUrl: `${IMAGE_BASE_URL}set25_10/06.webp` },
        { videoId: 'f1mu6EvbPm4qYvVw9KkHEJ', imageUrl: `${IMAGE_BASE_URL}set25_10/07.webp` },
        { videoId: 'mda93j9aBszrqeEGQ7SBTG', imageUrl: `${IMAGE_BASE_URL}set25_10/08.webp` },
        { videoId: '7z2BMMbBa3XrzUbZXN2hTz', imageUrl: `${IMAGE_BASE_URL}set25_10/09.webp` },
        { videoId: 'tyWBs4cUyMA8hFHeSwJHBz', imageUrl: `${IMAGE_BASE_URL}set25_10/10.webp` },
        { videoId: 'aNczHHhtrWo3cegNaS5jv6', imageUrl: `${IMAGE_BASE_URL}set25_10/11.webp` },
        { videoId: 'v6LMxonzmE1kWYmaYZDsNc', imageUrl: `${IMAGE_BASE_URL}set25_10/12.webp` },
        { videoId: 'mrJ8eqBZyyvXkWtzkozRXp', imageUrl: `${IMAGE_BASE_URL}set25_10/13.webp` },
        { videoId: 'uNwQewL8g1pYE9sXptx5sF', imageUrl: `${IMAGE_BASE_URL}set25_10/14.webp` },
        { videoId: '5CUxuJE9wdn63oRxFa2dsf', imageUrl: `${IMAGE_BASE_URL}set25_10/15.webp` },
        { videoId: 'c29vN8wTgVwCyUpe5Qqvti', imageUrl: `${IMAGE_BASE_URL}set25_10/16.webp` },
        { videoId: '8Y4g2XPab6WYNo8dDoFCzn', imageUrl: `${IMAGE_BASE_URL}set25_10/17.webp` },
        { videoId: 'bEg4ZMe7rCrd3zY8Y6UsiW', imageUrl: `${IMAGE_BASE_URL}set25_10/18.webp` },
        { videoId: 't4Zio7LxGhULSZv8Ld566C', imageUrl: `${IMAGE_BASE_URL}set25_10/19.webp` },
        { videoId: '6nMfZ2e9NCSRnAMy4SaPEJ', imageUrl: `${IMAGE_BASE_URL}set25_10/20.webp` },
        { videoId: '0r6ygY6yN7s3tTcRARimcR', imageUrl: `${IMAGE_BASE_URL}set25_10/21.webp` },
        { videoId: 'rt4VxDenV4Vyg38DBf6gnz', imageUrl: `${IMAGE_BASE_URL}set25_10/22.webp` },
        { videoId: 'hzLErEou6ULS8ZNzWnmsdf', imageUrl: `${IMAGE_BASE_URL}set25_10/23.webp` },
        { videoId: '8DTBFrgDjYGLYUPVUv1z6o', imageUrl: `${IMAGE_BASE_URL}set25_10/24.webp` },
        { videoId: 'm4XHmnR3NPrpCDFTFGY5rX', imageUrl: `${IMAGE_BASE_URL}set25_10/25.webp` },
        { videoId: '7jktYotokxnrCt5QCTYRhx', imageUrl: `${IMAGE_BASE_URL}set25_10/26.webp` },
        { videoId: 'bHwiVbeR3k3WVNUtNvU2UC', imageUrl: `${IMAGE_BASE_URL}set25_10/27.webp` },
        { videoId: 'nPNUvsJs2krXV1cYZdfnsC', imageUrl: `${IMAGE_BASE_URL}set25_10/28.webp` },
        { videoId: 'bxjDBwydRLfhGKd8uJjXyk', imageUrl: `${IMAGE_BASE_URL}set25_10/29.webp` },
        { videoId: 'iwGCSgU4GggeP9HaUNxEiy', imageUrl: `${IMAGE_BASE_URL}set25_10/30.webp` },
        { videoId: 'jRQ4LcejoUhe2uhRJe7tQL', imageUrl: `${IMAGE_BASE_URL}set25_10/31.webp` }
    ].map((item, index) => ({
        name: set25_10Names[index] || `–§–æ–∫—É—Å ${index + 1}`,
        duration: '',
        videoId: item.videoId,
        imageUrl: item.imageUrl
    }));

    // === 4. "10 –≤–∑—Ä—ã–≤–Ω—ã—Ö —Ñ–æ–∫—É—Å–æ–≤" (–∑–µ–ª—ë–Ω—ã–π) ===
    const greenLessons = [
        { name: '–§–æ–∫—É—Å —Å –∫—É–ø—é—Ä–æ–π —Å–æ —Å–∫—Ä–µ–ø–∫–∞–º–∏',       videoId: 'eNNqaZJYQ1pT4QyzrEmHxG', imageUrl: `${IMAGE_BASE_URL}set_green/01.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –±–∞–Ω–æ—á–∫–æ–π —Å –∫—É–±–∏–∫–∞–º–∏',        videoId: 'prvzotYQQiLi1hyW2E3dre', imageUrl: `${IMAGE_BASE_URL}set_green/02.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º –≤–µ—Ä—ë–≤–∫–∏',       videoId: 'oESzGbD7QMM5F6jskWccYo', imageUrl: `${IMAGE_BASE_URL}set_green/03.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å —Ä–∞–∑–Ω–æ—Ü–≤–µ—Ç–Ω—ã–º–∏ –ø–ª–∞—Ç–∫–∞–º–∏',     videoId: 'nzvo9AmhZVHcN7Z8B3kApM', imageUrl: `${IMAGE_BASE_URL}set_green/04.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–æ—á–∫–æ–π –∫–ª–æ—É–Ω–∞',           videoId: '08GkF4CUbxAjjTvvL3wQjZ', imageUrl: `${IMAGE_BASE_URL}set_green/05.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π ‚Ññ1',                videoId: 'opqz21wArkBwrbE7qdqHYX', imageUrl: `${IMAGE_BASE_URL}set_green/06.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–∞–º–∏',                  videoId: 'dRxiLD1gMhjdCPZLRDmi1W', imageUrl: `${IMAGE_BASE_URL}set_green/07.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π ‚Ññ2',                videoId: '8Ugpwk13JTBTeCVnEJ7Fs2', imageUrl: `${IMAGE_BASE_URL}set_green/08.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π ‚Ññ3',                videoId: 'hcubQZveGW9FDkMgqynVxH', imageUrl: `${IMAGE_BASE_URL}set_green/09.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π –∏ –∫—É–ø—é—Ä–æ–π',         videoId: 'agikb18oS1DLyU728RTyTX', imageUrl: `${IMAGE_BASE_URL}set_green/10.webp`, duration: '' }
    ];

    // === 5. "10 –≤–∑—Ä—ã–≤–Ω—ã—Ö —Ñ–æ–∫—É—Å–æ–≤" (—Å–∏–Ω–∏–π) ===
    const blueLessons = [
        { name: '–§–æ–∫—É—Å —Å –ø–µ—á–µ–Ω—å–µ–º',                   videoId: 'fAmKanTL8em72QuWteF8zi', imageUrl: `${IMAGE_BASE_URL}set_blue/01.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–æ—á–∫–æ–π —Å–µ—Ä–¥–µ—á–∫–∞',         videoId: 'hUSmqbZC4ujfhP24AAe3aZ', imageUrl: `${IMAGE_BASE_URL}set_blue/02.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –≤–æ–ª—à–µ–±–Ω–æ–π —Ç—Ä–æ—Å—Ç—å—é',          videoId: 'jSMYGhYqWWwpEhTETwcCKc', imageUrl: `${IMAGE_BASE_URL}set_blue/03.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å–æ —Å—Ç–∞–∫–∞–Ω–∞–º–∏ –∏ —à–∞—Ä–∏–∫–∞–º–∏',      videoId: 'cRHRD18ujwX9hSJixYSJL7', imageUrl: `${IMAGE_BASE_URL}set_blue/04.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–æ–π —Å –ª–µ—Å–∫–æ–π –∏ —Å–ø–∏—á–∫–æ–π',  videoId: 'mArVGiQpb82DjmfgDcB5be', imageUrl: `${IMAGE_BASE_URL}set_blue/05.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π ‚Ññ1',                videoId: 'nPjhzDgaVrtU5o3r1aRNwx', imageUrl: `${IMAGE_BASE_URL}set_blue/06.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π ‚Ññ2',                videoId: 'dY6BmY9DeNVhRQe9tcmsf7', imageUrl: `${IMAGE_BASE_URL}set_blue/07.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π ‚Ññ3',                videoId: 'sGacCBFkf7wug8jbrw49MZ', imageUrl: `${IMAGE_BASE_URL}set_blue/08.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–∞–º–∏',                  videoId: 'f4LpWeyHss8NRZBGLbNZS6', imageUrl: `${IMAGE_BASE_URL}set_blue/09.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä—É–∫',         videoId: '3s9iHn4D9mjBygE4bHmkZB', imageUrl: `${IMAGE_BASE_URL}set_blue/10.webp`, duration: '' }
    ];

    // === 6. 10 –í–§ –î–≤–® (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π) ‚Äî 8 –∏ 9 —É–¥–∞–ª–µ–Ω—ã, –ø–æ—Å–ª–µ–¥–Ω–∏–π = 10 ===
    const purpleLessons = [
        { name: '–§–æ–∫—É—Å —Å –∫—É–ø—é—Ä–æ–π –∏ –±—É–º–∞–∂–∫–æ–π',         videoId: '8SLdwKWH598mPnypAraUXc', imageUrl: `${IMAGE_BASE_URL}set_purple/01.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –¥–≤–æ–π–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏',           videoId: 'seMxJbKpcQfcqSsfh9XneG', imageUrl: `${IMAGE_BASE_URL}set_purple/02.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –ø–ª–∞—Ç–∫–æ–º –∏ –Ω–∞–ø–∞–ª—å—á–Ω–∏–∫–æ–º',     videoId: '3WGD5efBEeBDSPmPZpEgcV', imageUrl: `${IMAGE_BASE_URL}set_purple/03.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –±–∞—à–µ–Ω–∫–æ–π —Å —à–∞—Ä–∏–∫–æ–º',         videoId: 'xtoiDKigimDFTXQpUCcSnT', imageUrl: `${IMAGE_BASE_URL}set_purple/04.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –∫–æ–ª–æ–¥–æ–π –≤ —Ñ—É—Ç–ª—è—Ä–µ',          videoId: 'wpkGbDNU4HXMYRshphRBYQ', imageUrl: `${IMAGE_BASE_URL}set_purple/05.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –∫–∞—Ä—Ç–æ—á–∫–æ–π ‚Äú–î–∞–π –ø—è—Ç—å‚Äù',       videoId: 'bqJhGRTT1Vjn55NiXRXbUK', imageUrl: `${IMAGE_BASE_URL}set_purple/06.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π ‚Ññ1',                videoId: 'vHd3h4N7u8nhGt6QD2jtYx', imageUrl: `${IMAGE_BASE_URL}set_purple/07.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä—É–∫',         videoId: 'uB8SjBBhtCnqfqfouDVswN', imageUrl: `${IMAGE_BASE_URL}set_purple/08.webp`, duration: '' }
    ];

    // === 7. 10 –í–§ –î–≤–® (–∫—Ä–∞—Å–Ω—ã–π / –æ—Ä–∞–Ω–∂–µ–≤—ã–π) ‚Äî 7,8,9 –Ω–µ—Ç, —Å—Ä–∞–∑—É 10 ===
    const orangeLessons = [
        { name: '–§–æ–∫—É—Å —Å –ø–æ—Ä–æ–ª–æ–Ω–æ–≤—ã–º–∏ —à–∞—Ä–∏–∫–∞–º–∏ –∏ –∫—É–±–∏–∫–æ–º', videoId: 'efc9efrqePdRPPyv1y1QBi', imageUrl: `${IMAGE_BASE_URL}set_orange/01.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –∫–æ–ª—å—Ü–æ–º –∏ —Ü–µ–ø–æ—á–∫–æ–π',               videoId: 'bHR4Ee8wfKTfCQqF4G4KfA', imageUrl: `${IMAGE_BASE_URL}set_orange/02.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –±–∞–Ω–æ—á–∫–æ–π —Å –∫—É–±–∏–∫–æ–º',               videoId: '62dGFaS525Re3WCi6N3K4L', imageUrl: `${IMAGE_BASE_URL}set_orange/03.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å —á–∏—Å–ª–æ–≤—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏',                videoId: 'pKEQaU8CRxivmYiDPffRpM', imageUrl: `${IMAGE_BASE_URL}set_orange/04.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –∫–æ—à–µ–ª—å–∫–æ–º —Å –∫–∞—Ä—Ç–∞–º–∏',              videoId: 'xwHAGkCjKxfqXENV8wXCYQ', imageUrl: `${IMAGE_BASE_URL}set_orange/05.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å –∫–æ–ª—å—Ü–æ–º –∏ —Ä–µ–∑–∏–Ω–∫–æ–π',               videoId: 'sKYxKRvA2dLnkUCPhUwvkH', imageUrl: `${IMAGE_BASE_URL}set_orange/06.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å —Å —Ä–µ–∑–∏–Ω–∫–∞–º–∏ ‚Ññ3',                     videoId: 'pVq4YJgTw7cqDxsRdZXtym', imageUrl: `${IMAGE_BASE_URL}set_orange/07.webp`, duration: '' }
    ];

    // === 8. –ù–∞–±–æ—Ä "5 –ª—É—á—à–∏—Ö —Ñ–æ–∫—É—Å–æ–≤" ===
    const set5BestLessons = [
        { name: '–§–æ–∫—É—Å ‚Ññ1',   videoId: 'vMKwzCp7uZsZYTZfFkZk9H', imageUrl: `${IMAGE_BASE_URL}set5/01.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å ‚Ññ2',   videoId: '0rgGCD1buzbDh5f2iE6ViX', imageUrl: `${IMAGE_BASE_URL}set5/02.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å ‚Ññ3',   videoId: 'ovAdCrtQdD3HAcFhCmSr5Q', imageUrl: `${IMAGE_BASE_URL}set5/03.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å ‚Ññ4',   videoId: 'hHESqCThnp95ENSHhxtVQR', imageUrl: `${IMAGE_BASE_URL}set5/04.webp`, duration: '' },
        { name: '–§–æ–∫—É—Å ‚Ññ5',   videoId: '3WNXwk6ipai844JbUkKVdt', imageUrl: `${IMAGE_BASE_URL}set5/05.webp`, duration: '' },
        { name: '–ë–æ–Ω—É—Å ‚Ññ1',   videoId: 'qgAmH1R3r2CiHJD3BGpH4D', imageUrl: `${IMAGE_BASE_URL}set5/06.webp`, duration: '' },
        { name: '–ë–æ–Ω—É—Å ‚Ññ2',   videoId: 'bLo58DWJNC239xctGsAonf', imageUrl: `${IMAGE_BASE_URL}set5/07.webp`, duration: '' }
    ];

    // === 9. –†–ï–ï–°–¢–† –ö–£–†–°–û–í ===
    const courses = {
        set_75:     { title: '75 –ª—É—á—à–∏—Ö —Ñ–æ–∫—É—Å–æ–≤',             lessons: set75Lessons,      indexOffset: 1 },
        set_50:     { title: '50 –ª—É—á—à–∏—Ö —Ñ–æ–∫—É—Å–æ–≤',             lessons: set50Lessons,      indexOffset: 0 },
        set_25_10:  { title: '35 –ª—É—á—à–∏—Ö —Ñ–æ–∫—É—Å–æ–≤',             lessons: set25_10Lessons,   indexOffset: 1 },
        set_green:  { title: '10 –≤–∑—Ä—ã–≤–Ω—ã—Ö —Ñ–æ–∫—É—Å–æ–≤ (–∑–µ–ª—ë–Ω—ã–π)', lessons: greenLessons,      indexOffset: 1 },
        set_blue:   { title: '10 –≤–∑—Ä—ã–≤–Ω—ã—Ö —Ñ–æ–∫—É—Å–æ–≤ (—Å–∏–Ω–∏–π)',   lessons: blueLessons,       indexOffset: 1 },
        set_purple: { title: '10 –í–§ –î–≤–® (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)',        lessons: purpleLessons,     indexOffset: 1 },
        set_orange: { title: '10 –í–§ –î–≤–® (–∫—Ä–∞—Å–Ω—ã–π)',           lessons: orangeLessons,     indexOffset: 1 },
        set_5_best: { title: '5 –ª—É—á—à–∏—Ö —Ñ–æ–∫—É—Å–æ–≤',              lessons: set5BestLessons,   indexOffset: 1 }
    };

    // === 10. –ì–õ–û–ë–ê–õ ===
    let courseSelectionPage, lessonListView, videoPlayerView, lessonList;
    let currentCourseId = null;
    let bgMusic, clickSound, isMusicPlaying = false, isSoundEnabled = true;
    let kinescopePlayer, videoThumbnailLarge, noVideoWarning;
    let registrationOverlay, policyInitialView, policyFullView, registrationFormView, successView;
    let registrationForm, loadingSpinner;

    function initializeDOMElements() {
        courseSelectionPage = document.getElementById('course-selection');
        lessonListView = document.getElementById('lesson-list-view');
        videoPlayerView = document.getElementById('video-player-view');
        lessonList = document.getElementById('lesson-list');
        kinescopePlayer = document.getElementById('kinescope-player');
        videoThumbnailLarge = document.getElementById('video-thumbnail-large');
        noVideoWarning = document.getElementById('no-video-warning');

        bgMusic = document.getElementById('bg-music');
        clickSound = document.getElementById('click-sound');
        document.getElementById('music-toggle').addEventListener('click', toggleMusic);

        registrationOverlay = document.getElementById('registration-overlay');
        policyInitialView = document.getElementById('policy-initial-view');
        policyFullView = document.getElementById('policy-full-view');
        registrationFormView = document.getElementById('registration-form-view');
        successView = document.getElementById('success-view');
        registrationForm = document.getElementById('registration-form');
        loadingSpinner = document.getElementById('loading-spinner');

        document.getElementById('read-policy-btn').addEventListener('click', showPolicyFullView);
        document.getElementById('agree-and-continue-btn').addEventListener('click', showRegistrationForm);
        document.getElementById('agree-final-btn').addEventListener('click', showRegistrationForm);
        registrationForm.addEventListener('submit', handleRegistrationSubmit);

        setupTelegramWebAppEvents();
        setupCarouselWheelScroll();
    }

    // === 11. –ê–£–î–ò–û ===
    function playClickSound() {
        if (isSoundEnabled && clickSound) {
            clickSound.currentTime = 0;
            clickSound.play().catch(() => {});
        }
    }

    function toggleMusic() {
        const btn = document.getElementById('music-toggle');
        if (isMusicPlaying) {
            bgMusic.pause();
            isMusicPlaying = false;
            btn.textContent = '‚ñ∂Ô∏è';
            btn.title = '–§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞';
        } else {
            bgMusic.play().then(() => {
                isMusicPlaying = true;
                btn.textContent = '‚è∏Ô∏è';
                btn.title = '–ü–∞—É–∑–∞';
            }).catch(() => {
                isMusicPlaying = false;
                btn.textContent = '‚ñ∂Ô∏è';
            });
        }
    }

    function pauseMusicForVideo() {
        if (isMusicPlaying) bgMusic.pause();
    }

    function resumeMusicAfterVideo() {
        if (isMusicPlaying) {
            bgMusic.play().catch(() => {});
        }
    }

    function setupTelegramWebAppEvents() {
        if (window.Telegram && window.Telegram.WebApp) {
            Telegram.WebApp.ready();
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    if (isMusicPlaying) bgMusic.pause();
                } else {
                    if (isMusicPlaying) resumeMusicAfterVideo();
                }
            });
        }
    }

    // === 12. –ö–ê–†–£–°–ï–õ–¨ ===
    function setupCarouselWheelScroll() {
        const wrapper = document.getElementById('course-carousel-wrapper');
        if (!wrapper) return;
        wrapper.addEventListener('wheel', (e) => {
            if (Math.abs(e.deltaY) > Math.abs(e.deltaX)) {
                e.preventDefault();
                wrapper.scrollLeft += e.deltaY;
            }
        }, { passive: false });
    }

    // === 13. –ù–ê–í–ò–ì–ê–¶–ò–Ø ===
    function startApp() {
        document.body.addEventListener('click', () => {
            if (!isMusicPlaying && bgMusic.paused) toggleMusic();
        }, { once: true });

        handleInitialCheck();
        showCourseSelection();
    }

    function showCourseSelection() {
        courseSelectionPage.classList.remove('hidden');
        lessonListView.classList.add('hidden');
        videoPlayerView.classList.add('hidden');
    }

    function showLessonList(courseId) {
        playClickSound();
        currentCourseId = courseId;

        const course = courses[courseId];
        if (!course) return;

        const placeholderCourseName = document.getElementById('placeholder-course-name');
        document.getElementById('lesson-list-title').textContent = `–ù–∞–±–æ—Ä: ${course.title}`;
        if (placeholderCourseName) placeholderCourseName.textContent = course.title;

        const lessonsPlaceholder = document.getElementById('lessons-placeholder');
        lessonList.innerHTML = '';

        if (!course.lessons.length) {
            lessonsPlaceholder.innerHTML = `
                <span class="placeholder-icon">‚è≥</span>
                <p style="font-size:1.0em;font-weight:700;margin-bottom:4px;">
                    –í–∏–¥–µ–æ-—É—Ä–æ–∫–∏ –¥–ª—è –Ω–∞–±–æ—Ä–∞ "${course.title}" –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–≥—Ä—É–∑–∫–∏.
                </p>
                <p style="font-size:0.9em;">–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è —Ä–æ–ª–∏–∫–∏.</p>
            `;
        } else {
            lessonsPlaceholder.innerHTML = `
                <span class="placeholder-icon">üé¨</span>
                <p style="font-size:1.0em;font-weight:700;margin-bottom:4px;">
                    –í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–∫ –Ω–∏–∂–µ, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ.
                </p>
            `;
        }

        const indexOffset = (typeof course.indexOffset === 'number') ? course.indexOffset : 1;

        course.lessons.forEach((lesson, index) => {
            const displayIndex = index + indexOffset;
            const li = document.createElement('li');
            li.className = 'lesson-item';
            li.innerHTML = `
                <img src="${lesson.imageUrl}" alt="–£—Ä–æ–∫ ${displayIndex}" class="lesson-item-preview">
                <span class="title">${displayIndex}. ${lesson.name}</span>
            `;
            li.addEventListener('click', () => playLesson(lesson, li));
            lessonList.appendChild(li);
        });

        courseSelectionPage.classList.add('hidden');
        videoPlayerView.classList.add('hidden');
        lessonListView.classList.remove('hidden');
        lessonListView.scrollIntoView({ behavior: 'smooth' });
    }

    function playLesson(lesson, clickedElement) {
        playClickSound();
        pauseMusicForVideo();

        document.querySelectorAll('.lesson-item').forEach(item => item.classList.remove('active'));
        clickedElement.classList.add('active');

        document.getElementById('current-lesson-name').textContent = lesson.name;
        videoThumbnailLarge.src = lesson.imageUrl || '';
        videoThumbnailLarge.style.opacity = 1;

        if (lesson.videoId && lesson.videoId.trim() !== '') {
            kinescopePlayer.src = `https://kinescope.io/embed/${lesson.videoId}`;
            noVideoWarning.classList.add('hidden');
            setTimeout(() => { videoThumbnailLarge.style.opacity = 0; }, 150);
        } else {
            kinescopePlayer.src = '';
            noVideoWarning.classList.remove('hidden');
            videoThumbnailLarge.style.opacity = 1;
        }

        lessonListView.classList.add('hidden');
        videoPlayerView.classList.remove('hidden');
        videoPlayerView.scrollIntoView({ behavior: 'smooth' });
    }

    function goBackToLessonList() {
        playClickSound();
        kinescopePlayer.src = '';
        videoThumbnailLarge.style.opacity = 0;
        noVideoWarning.classList.add('hidden');
        resumeMusicAfterVideo();

        if (currentCourseId) {
            videoPlayerView.classList.add('hidden');
            lessonListView.classList.remove('hidden');
            lessonListView.scrollIntoView({ behavior: 'smooth' });
        } else {
            showCourseSelection();
        }
    }

    // === 14. –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø ===
    function getTelegramIdFromContext() {
        if (window.Telegram && window.Telegram.WebApp &&
            Telegram.WebApp.initDataUnsafe &&
            Telegram.WebApp.initDataUnsafe.user) {
            return Telegram.WebApp.initDataUnsafe.user.id.toString();
        }
        const urlParams = new URLSearchParams(window.location.search);
        const tgIdFromUrl = urlParams.get('tg_id');
        return tgIdFromUrl || localStorage.getItem(TG_ID_STORAGE_KEY) || 'null';
    }

    function handleInitialCheck() {
        const registered = localStorage.getItem(USER_STORAGE_KEY);
        const tgId = getTelegramIdFromContext();

        if (registered === 'true') {
            hideRegistrationModal();
        } else {
            if (tgId && tgId !== 'null' && tgId !== 'undefined') {
                const tgInput = document.getElementById('reg-tg-id');
                if (tgInput) tgInput.value = tgId;
                showRegistrationModal(true);
            } else {
                showRegistrationModal(false);
            }
        }
    }

    function showRegistrationModal(skipPolicy = false) {
        registrationOverlay.classList.remove('hidden');
        loadingSpinner.classList.add('hidden');
        [policyFullView, registrationFormView, successView].forEach(v => v.classList.add('hidden'));

        if (skipPolicy) {
            showRegistrationForm();
        } else {
            policyInitialView.classList.remove('hidden');
            document.getElementById('modal-title').textContent = '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!';
        }
    }

    function hideRegistrationModal() {
        registrationOverlay.classList.add('hidden');
    }

    function showPolicyFullView() {
        playClickSound();
        policyInitialView.classList.add('hidden');
        policyFullView.classList.remove('hidden');
        document.getElementById('modal-title').textContent = '–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏';
    }

    function showRegistrationForm() {
        playClickSound();
        policyInitialView.classList.add('hidden');
        policyFullView.classList.add('hidden');
        registrationFormView.classList.remove('hidden');
        document.getElementById('modal-title').textContent = '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è';

        const tgId = getTelegramIdFromContext();
        if (tgId && tgId !== 'null' && tgId !== 'undefined') {
            const tgInput = document.getElementById('reg-tg-id');
            if (tgInput) tgInput.value = tgId;
        }
    }

    function showSuccessView() {
        [policyInitialView, policyFullView, registrationFormView, loadingSpinner].forEach(v => v.classList.add('hidden'));
        successView.classList.remove('hidden');
        document.getElementById('modal-title').textContent = '–ì–æ—Ç–æ–≤–æ!';
    }

    function showLoadingSpinner() {
        [policyInitialView, policyFullView, registrationFormView, successView].forEach(v => v.classList.add('hidden'));
        loadingSpinner.classList.remove('hidden');
        document.getElementById('modal-title').textContent = '–ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö...';
    }

    async function handleRegistrationSubmit(e) {
        e.preventDefault();
        playClickSound();
        showLoadingSpinner();

        const formData = new FormData(registrationForm);
        const data = Object.fromEntries(formData.entries());

        if (data.tg_id && data.tg_id !== 'null' && data.tg_id !== 'undefined') {
            data.source = '–¢–µ–ª–µ–≥—Ä–∞–º –†—É—Å–ª–∞–Ω';
        } else {
            data.source = '–°–∞–π—Ç –†—É—Å–ª–∞–Ω';
        }

        try {
            await fetch(WEB_APP_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });

            localStorage.setItem(USER_STORAGE_KEY, 'true');
            if (data.source === '–¢–µ–ª–µ–≥—Ä–∞–º –†—É—Å–ª–∞–Ω') {
                localStorage.setItem(TG_ID_STORAGE_KEY, data.tg_id);
            }

            showSuccessView();
        } catch (err) {
            document.getElementById('modal-title').textContent = '–û—à–∏–±–∫–∞!';
            loadingSpinner.textContent = '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.';
            setTimeout(() => showRegistrationModal(data.source === '–¢–µ–ª–µ–≥—Ä–∞–º –†—É—Å–ª–∞–Ω'), 3000);
        }
    }

    // === 15. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
    document.addEventListener('DOMContentLoaded', () => {
        initializeDOMElements();

        document.querySelectorAll('.course-card').forEach(card => {
            card.addEventListener('click', (e) => {
                const courseId = e.currentTarget.getAttribute('data-id');
                showLessonList(courseId);
            });
        });

        startApp();
    });
</script>
</body>
</html>
